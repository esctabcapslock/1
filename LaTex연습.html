<!DOCTYPE html>
<!--http://www.hostmath.com/ 참조할것-->

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./L.png">
    <meta charset="UTF-8">
    <title>TeX 수식 변환기</title>

    <script>
        window.onload = function() {
            document.getElementById("변환전").focus();
        }

        function text_copy() {
            var nontext = document.createElement('textarea');
            nontext.value = `\\( ${input.value.trim().replace(/<br>/g,'')}\\)`
            document.body.append(nontext);

            nontext.select();
            var a = document.execCommand('copy');
            nontext.remove();
        }

        function text_delete() {
            input.value = "";
        }

        window.MathJax = {
            loader: {
                load: ["input/tex", "output/chtml"]
            }
        };

    </script>
    <script id="MathJax-script" async src="./MathJax-master/es5/tex-mml-chtml.js"></script>

    <style>
        body {
            overflow-x: hidden;
        }

        @font-face {
            font-family: 'D2Coding';
            src: url(./D2Coding-Ver1.3.2-20180524.ttf) format('truetype');
        }

        #변환전 {
            font-family: D2Coding;
        }

    </style>


    <!--입력창-->
    <style>
        #제목{
            position: relative;
            top:-20px;
        }

        #입력버튼 {
            position: absolute;
            top: 130px;
            width: 100%;
            z-index: 100;

        }

        #변환 {
            position: absolute;
            top: 200px;
            z-index: 10;
            width: 100%;

        }

        .변환 {
            width: 90%;
            height: 100px;
            background-color: floralwhite;
            border: 1px dashed black;
            margin: 0 5%;
            margin-top: 20px;
        }

        #복사버튼 {
            margin-left: 10%;
            display: inline-block;
        }

        #변환전 {}

        #변환후 {}

    </style>

    <style>
        #입력버튼>div {
            background-color: beige;
            padding: 8px;
            margin: 4px;
            float: left;
            display: inline-block;
        }

        #입력버튼>div>.타이틀 {
            font-weight: bold;
        }

        #입력버튼>div>.내용 {
            display: none;
        }

        #입력버튼>div>.내용>div {
            padding: 1px 0;
            margin: 0;
        }


        #입력버튼>div>.내용>div:hover {
            background-color: grey;
        }

        #입력버튼>div:hover>div {
            display: block;
        }

    </style>

    <!--위키링크-->
    <style>
        #위키링크 {
            margin-left: 30px;
            color: green;
            text-decoration-line: none;
        }

        #위키링크:hover {
            color: greenyellow;
            text-decoration-line: none;
        }

        #위키링크:visited {
            text-decoration-line: none;
            color: green;
        }

    </style>
    
    
    
<!--설명문-->
    <style>
        #설명문{
            display: inline-block;
            position: relative;
            top: 360px;
        }
    </style>
</head>


<body>
    <!-- \( \LaTeX \lim_{x \to m} \beta \alpha \theta \) -->

    <a id="위키링크" href="https://ko.wikipedia.org/wiki/%EC%9C%84%ED%82%A4%EB%B0%B1%EA%B3%BC:TeX_%EB%AC%B8%EB%B2%95#%EB%B9%88%EC%B9%B8%EC%A1%B0%EC%A0%95">위키 설명서</a>
    <a id="위키링크" href="https://go.sasa.hs.kr/board/view/19101/uid/17994/page/1">관련 글</a>
    <a id="위키링크" href="https://www.mathjax.org/#services">핵심기능 출처 (mathjax)</a>
    
    
    <h2 id="제목">\begin{pmatrix} {\color{Blue}수} & {\color{Red}식} \\{\color{Green}변} & {\color{Orange}환}\end{pmatrix}
    
    </h2>
    <div id="입력버튼_wrap">
    <div id="입력버튼">
        <div class="종류">
            <div class="타이틀">백터</div>
            <div class="내용">
                <div id="" title="\dot{}">\( \dot{□}\)</div>
                <div id="" title="\ddot{}">\( \ddot{□}\)</div>
                <div id="" title="\acute{}">\( \acute{□}\)</div>
                <div id="" title="\grave{}">\( \grave{□}\)</div>
                <div id="" title="\check{}">\( \check{□}\)</div>
                <div id="" title="\breve{}">\( \breve{□}\)</div>
                <div id="" title="\tilde{}">\( \tilde{□}\)</div>
                <div id="" title="\hat{}">\(\hat{□} \)</div>
                <div id="" title="\widehat{}">\(\widehat{□}\)</div>
                <div id="" title="\vec{}">\( \vec{□}\)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">함수</div>
            <div class="내용">
                <div id="" title="{ \over }">\({□ \over □}\)</div>
                <div id="" title="\frac{}{}">\(\frac{□}{□}\)</div>
                <div id="" title="{}^{}">\( {□}^{□}\)</div>
                <div id="" title="10^{}">\( 10^{□}\)</div>
                <div id="" title="{}_{}">\( {□}_{□}\)</div>
                <div id="" title="\left\vert \right\vert">\( \left\vert □ \right\vert\)</div>
                <div id="" title="\sqrt{ }">\(\sqrt{□}\)</div>
                <div id="" title="\sqrt[ ]{ }">\(\sqrt[□]{□} \)</div>
                <div id="" title="\sin( )">\(\sin(□)\)</div>
                <div id="" title="\cos( )">\(\cos(□) \)</div>
                <div id="" title="\tan( )">\(\tan(□)\)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">미적</div>
            <div class="내용">
                <div id="" title="\operatorname{d}">\( \operatorname{d}□\)</div>
                <div id="" title="\partial">\(\partial □ \)</div>
                <div id="" title="\nabla">\(\nabla □\)</div>
                <div id="" title="\infty">\(\infty\)</div>
                <div id="" title="f'">\(f' \)</div>
                <div id="" title="f''">\(f'' \)</div>
                <div id="" title="\sum_{i= }^{ }{ }">\(\sum_{k=□}^□ □\)</div>
                <div id="" title="\prod_{i= }^{ }{ }">\(\prod_{i=□}^□ □\)</div>
                <div id="" title="\lim_{ \to }">\(\lim_{□\to □}\)</div>
                <div id="" title="\int_{ }^{ }{ }">\(\int_{□}^{□} □\)</div>
                <div id="" title="\oint_{ }{}">\(\oint_{□} □ \)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">집합</div>
            <div class="내용">
                <div id="" title="\varnothing">\(\varnothing \)</div>
                <div id="" title="\in">\(\in \)</div>
                <div id="" title="\notin">\(\notin \)</div>
                <div id="" title="\ni">\(\ni \)</div>
                <div id="" title="\not\ni">\(\not\ni \)</div>
                <div id="" title="\cap">\(\cap \)</div>
                <div id="" title="\cup">\(\cup \)</div>
                <div id="" title="\subset">\(\subset \)</div>
                <div id="" title="\supset">\(\supset \)</div>
                <div id="" title="\subseteq">\(\subseteq \)</div>
                <div id="" title="\nsubseteq">\(\nsubseteq \)</div>
                <div id="" title="\subsetneq">\(\subsetneq \)</div>
                <div id="" title="\supseteq">\( \supseteq\)</div>
                <div id="" title="\nsupseteq">\(\nsupseteq \)</div>
                <div id="" title="\supsetneq">\(\supsetneq \)</div>

            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">연산/단위</div>
            <div class="내용">
                <div id="" title="+">\( +\)</div>
                <div id="" title="-">\( -\)</div>
                <div id="" title="\pm">\(\pm \)</div>
                <div id="" title="\mp">\(\mp \)</div>
                <div id="" title="\times">\(\times \)</div>
                <div id="" title="\cdot">\(\cdot \)</div>
                <div id="" title="\div">\(\div \)</div>
                <div id="" title="\circ">\(\circ \)</div>
                <div id="" title="\star">\(\star \)</div>
                <div id="" title="\backslash">\(\backslash \)</div>
                <div id="" title="°">\(□° \)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">글자</div>
            <div class="내용">
               <div id="" title="\infty">\(\infty \)</div>
                <div id="" title="{}^{}">\( {□}^{□}\)</div>
                <div id="" title="\mathbb{}">\( \mathbb{ABC}\)</div>
                <div id="" title="\aleph">\(\aleph \)</div>
                <div id="" title="\alpha">\(\alpha \)</div>
                <div id="" title="\beta">\(\beta \)</div>
                <div id="" title="\gamma">\(\gamma \)</div>
                <div id="" title="\delta">\(\delta \)</div>
                <div id="" title="\epsilon">\(\epsilon \)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">관계</div>
            <div class="내용">
                <div id="" title="=">\(= \)</div>
                <div id="" title="\ne">\(\ne \)</div>
                <div id="" title="\equiv">\(\equiv \)</div>
                <div id="" title="\not\equiv">\(\not\equiv \)</div>
                <div id="" title="\sim">\(\sim \)</div>
                <div id="" title="\approx">\(\approx \)</div>
                <div id="" title="\propto">\(\propto \)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">괄호</div>
            <div class="내용">
                <div id="" title="\{">\(\{\)</div>
                <div id="" title="\}">\(\} \)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">논리</div>
            <div class="내용">
                <div id="" title="\forall">\(\forall \)</div>
                <div id="" title="\exists">\(\exists \)</div>
                <div id="" title="\nexists">\(\nexists \)</div>
                <div id="" title="\therefore">\(\therefore \)</div>
                <div id="" title="\because">\(\because \)</div>
                <div id="" title="\land">\(\land \)</div>
                <div id="" title="\lor">\(\lor \)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">화살표</div>
            <div class="내용">
                <div id="" title="\Rightarrow">\(\Rightarrow \)</div>
                <div id="" title="\nRightarrow">\(\nRightarrow \)</div>
                <div id="" title="\Leftarrow">\(\Leftarrow \)</div>
                <div id="" title="\nLeftarrow">\(\nLeftarrow \)</div>
                <div id="" title="\Leftrightarrow">\(\Leftrightarrow \)</div>
                <div id="" title="\nLeftrightarrow">\(\nLeftrightarrow \)</div>
                <div id="" title="\to">\(\to \)</div>
                <div id="" title=" \gets">\( \gets \)</div>
                <div id="" title="\leftrightarrow">\(\leftrightarrow \)</div>
                <div id="" title="\mapsto">\(\mapsto \)</div>
            </div </div>
        </div>
        <div class="종류">
            <div class="타이틀">공백</div>
            <div class="내용">
                <div id="" title="\,">\(□\,□\)</div>
                <div id="" title="\;">\(□\;□\)</div>
                <div id="" title="\  ">\(□\ □\)</div>
                <div id="" title="\quad">\(□\quad □\)</div>
                <div id="" title="\qquad">\(□\qquad □\)</div>
            </div </div>
        </div>
    </div>
    </div>
    <div id="변환">
        <textarea id="변환전" class="변환" placeholder="여기에 수식을 입력. 상단 버튼이나 하단 단축키 활용. ctrl+s로 결과복사"></textarea>
        <input id="복사버튼" type="button" onclick="text_copy();" value="복사 ctrl+s">
        <input id="삭제버튼" type="button" onclick="text_delete(); change_fn();" value="삭제 ctrl+d">
        <div id="변환후" class="변환" contenteditable>\begin{pmatrix}2 & 3 \\1 & 2\end{pmatrix}</div>
    </div>

    <script>
        var input = document.getElementById("변환전");
        var output = document.getElementById("변환후");

        input.addEventListener("paste", change_fn);
        //input.addEventListener("keydown", edit_fn);
        input.addEventListener("keyup", change_fn);
        document.body.addEventListener("keydown",edit_fn)

        document.getElementById("변환전").addEventListener("keydown", MathJax.tex2chtml);


        function change_fn(e) {
            //output.innerHTML = `\\( ${input.innerHTML.trim().replace(/<br>/g,'')}\\)`;

            output.innerHTML = "\\(" + input.value.trim() + "\\)"

            MathJax.typeset([output]);
            //MathJax.typesetPromise([output]);

            //output.innerHTML="";
            //output.appendChild(MathJax.tex2chtmlPromise(input.value.trim()));
        }

        function edit_fn(e) {

            //console.log(input.innerHTML);
            //누른 키 출력 console.log(e);

            if (e.ctrlKey || e.altKey) {
                if (e.key != 'z' && e.key != 'x' && e.key != 'v' && e.key != 'c'&& e.key != 'a') e.returnValue = false; //브라우저키 무효화

                console.log("ctrl",e.key);
                var 넣을값 = "";
                
                if (e.key == 'o') 넣을값 = "{ \\over } " + ' ';
                if (e.key == ' ') 넣을값 = "\\;" + ' ';
                if (e.key == 't') 넣을값 = "\\times" + ' ';
                if (e.key == 'f') 넣을값 = "\\forall" + ' ';
                if (e.key == 'e') 넣을값 = "\\exists" + ' ';
                if (e.key == 'N') 넣을값 = " \\mathbb{N}" + ' ';
                if (e.key == 'Z') 넣을값 = "\\mathbb{Z}" + ' ';
                if (e.key == 'Q') 넣을값 = "\\mathbb{Q}" + ' ';
                if (e.key == 'C') 넣을값 = "\\mathbb{C}" + ' ';
                if (e.key == 'd') {
                    text_delete();
                    change_fn();
                    return;
                }
                if (e.key == 's') {
                    text_copy();
                    return;
                }
                let v = input.value;
                let p = input.selectionStart;
                input.value = v.substring(0, p) + 넣을값 + v.substring(p, v.length);
                change_fn();
            }
        }

        var 내용div = document.querySelectorAll(".내용>div");
        for (var i = 0; i < 내용div.length; i++) {
            내용div[i].addEventListener("click", edit_click_fn);
        }

        function edit_click_fn(e) {
            //console.log(this);

            let v = input.value;
            let p = input.selectionStart;
            input.value = v.substring(0, p) + this.title + " " + v.substring(p, v.length);
            change_fn();
            /*
            input.innerHTML = input.innerHTML.replace(/<br>/g, '') + this.title + ' ';
            input.focus();

            var r = output.createTextRange();
            r.moveEnd('textedit');
            r.text = output.value;
            */
        }

    </script>
    
    <div>

    </div>
    <div id="설명문">
      <span style="color: brown">f. 개별 수식 단위로 복*붙해서 사용해 주세요! </span><br>
      
       <h5>단축키</h5>
       
        공백: ctrl+스패이스바<br>
        복사: ctrl+s<br>
        전체삭제: ctrl+d<br>
        분수: ctrl+o<br>
        \( \forall\): ctrl+f<br>
        \( \exists\): ctrl+e<br>
        \( \mathbb{N}\): ctrl+shift+n<br>
        \( \mathbb{Z}\): ctrl+shift+z<br>
        \( \mathbb{Q}\): ctrl+shift+q<br>
        \( \mathbb{C}\): ctrl+shift+c<br><br>
        
        
        선택항목 : ctrl+c<br>
        잘라내기: ctrl+x<br>
        붙여넣기: ctrl+v<br>
        전체선택: ctrl+a<br>
        
    </div>
    
</body>

</html>
